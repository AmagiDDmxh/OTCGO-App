{"version":3,"sources":["../../src/containers/login/login.module.ts","../../src/components/login/login-form.ts","../../src/components/login/index.ts","../../src/components/login/login.validator.ts","../../src/components/login/login-form.module.ts","../../src/containers/login/login.ts","../../src/shared/userWallet.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core'\r\nimport { LoginPage } from './login'\r\nimport { IonicPageModule } from 'ionic-angular'\r\nimport { TranslateModule } from '@ngx-translate/core'\r\nimport { LoginFormModule } from '../../components/login'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LoginPage,\r\n  ],\r\n  imports: [\r\n\t\tLoginFormModule,\r\n    TranslateModule.forChild(),\r\n    IonicPageModule.forChild(LoginPage)\r\n  ]\r\n})\r\nexport class LoginPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/login/login.module.ts","import {\r\n\tComponent,\r\n\tEventEmitter,\r\n\tInput,\r\n\tOnInit,\r\n\tOutput,\r\n} from '@angular/core'\r\nimport {\r\n\tFormBuilder,\r\n\tFormGroup,\r\n\tValidators\r\n} from '@angular/forms'\r\nimport { TranslateService } from '@ngx-translate/core'\r\nimport { AlertController } from 'ionic-angular'\r\n\r\nimport { WIFValidator, asyncWIFValidator } from './login.validator'\r\nimport { isOldWallet, isWallet } from '../../shared/utils'\r\n\r\n\r\n@Component({\r\n\tselector: 'login-form',\r\n\ttemplateUrl: `login-form.html`\r\n})\r\nexport class LoginForm implements OnInit {\r\n\t@Input() tip: string\r\n\t@Output() onPrivateKey = new EventEmitter()\r\n\t@Output() onOldWallet = new EventEmitter()\r\n\t@Output() onNEP5 = new EventEmitter()\r\n\t@Output() onWIF = new EventEmitter()\r\n\r\n\r\n\tfile\r\n\timportText\r\n\timportTextShort: 'Import' | '导入'\r\n\timportTextLong: 'Import Wallet File' | '导入钱包文件'\r\n\tisWIFKey = true\r\n\tisOldWallet = false\r\n\tloginForm: FormGroup\r\n\ttranslationPrefix = 'LOGIN.'\r\n\r\n\tconstructor (\r\n\t\tprivate fb: FormBuilder,\r\n\t\tprivate ts: TranslateService,\r\n\t\tprivate alertCtrl: AlertController\r\n\t) {}\r\n\r\n\tget wif () { return this.loginForm.get('wif') }\r\n\tget passphrase () { return this.loginForm.get('passphrase') }\r\n\r\n\tngOnInit () {\r\n\t\tthis.loginForm = this.fb.group({\r\n\t\t\twif: ['', [Validators.required, WIFValidator], asyncWIFValidator],\r\n\t\t\tpassphrase: ['', [Validators.required, Validators.minLength(4)]]\r\n\t\t})\r\n\t\tthis.getTranslations()\r\n\t}\r\n\r\n\tgetTranslations () {\r\n\t\tconst texts = ['import_long', 'import_short']\r\n\t\tconst translations = texts.map(text => this.translationPrefix + text)\r\n\t\tthis.ts.get(translations).subscribe(trs => {\r\n\t\t\tthis.importTextLong = trs[translations[0]]\r\n\t\t\tthis.importTextShort = trs[translations[1]]\r\n\t\t})\r\n\t\tthis.importText = this.importTextShort\r\n\t}\r\n\r\n\tswitchImportBox (fileInput: HTMLInputElement) {\r\n\t\tthis.isWIFKey = false\r\n\t\tthis.importText = this.importTextLong\r\n\t\tif (window.navigator && !this.wif.value) fileInput.click()\r\n\t}\r\n\r\n\tswitchWIFKeyBox () {\r\n\t\tthis.isWIFKey = true\r\n\t\tthis.importText = this.importTextShort\r\n\t}\r\n\r\n\tshowPrompt = (msg: string) => this.alertCtrl.create({ title: msg }).present()\r\n\r\n\tfileChange (file) {\r\n\t\tif (/.json$/.test(file.name)) {\r\n\t\t\tconst reader = new FileReader()\r\n\t\t\tconst ng = this\r\n\r\n\t\t\t// In the onload function `this` is reference to reader itself\r\n\t\t\treader.onload = function () {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst JSONFile = JSON.parse(this.result)\r\n\r\n\t\t\t\t\tif (isOldWallet(JSONFile)) {\r\n\t\t\t\t\t\tng.file = JSONFile\r\n\t\t\t\t\t\tng.isOldWallet = true\r\n\t\t\t\t\t\tng.importText = file.name\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t} else if (isWallet(JSONFile)) {\r\n\t\t\t\t\t\tng.file = JSONFile\r\n\t\t\t\t\t\tng.isOldWallet = false\r\n\t\t\t\t\t\tng.importText = file.name\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthrow new Error()\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log('file change error', e)\r\n\t\t\t\t\tng.showPrompt('Invalid wallet file')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treader.readAsText(file)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconsole.log('invalid file', file)\r\n\t\treturn this.showPrompt('Invalid wallet file')\r\n\t}\r\n\r\n\tlogin ({ controls, value }) {\r\n\t\tconst { file, isWIFKey } = this\r\n\t\tconst { wif: wifControl, passphrase: passphraseControl } = controls\r\n\t\tconst { wif: wifValue, passphrase: passphraseValue } = value\r\n\r\n\t\tif (file && !this.isOldWallet) {\r\n\t\t\twifControl.setValue('')\r\n\t\t\tpassphraseControl.setValue('')\r\n\t\t}\r\n\r\n\t\tif (wifValue && isWIFKey && !passphraseValue) {\r\n\t\t\tif (wifControl.invalid && wifValue !== 'test') return\r\n\t\t\treturn this.onWIF.emit(wifValue)\r\n\t\t} else if (file && !isWIFKey && !wifValue) {\r\n\t\t\tif (isOldWallet(file)) {\r\n\t\t\t\tif (!passphraseControl.valid) return\r\n\t\t\t\treturn this.onOldWallet.emit({ oldWallet: file, passphrase: passphraseValue })\r\n\t\t\t} else if (isWallet(file)) {\r\n\t\t\t\treturn this.onNEP5.emit(file)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/login/login-form.ts","export * from './login-form'\r\nexport { LoginFormModule } from './login-form.module'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/login/index.ts","\r\nimport { FormControl, ValidationErrors } from '@angular/forms'\r\nimport { Observable } from 'rxjs/Observable'\r\nimport { debounceTime, map } from 'rxjs/operators'\r\nimport { isWIF } from '../../shared/utils'\r\n\r\n\r\nexport function asyncWIFValidator (wifCtrl: FormControl): Observable<ValidationErrors | null> {\r\n\treturn Observable.create(obs =>\r\n\t\twifCtrl\r\n\t\t.valueChanges\r\n\t\t.pipe(\r\n\t\t\tdebounceTime(250),\r\n\t\t\tmap(value => value.trim()),\r\n\t\t\tmap(value => {\r\n\t\t\t\tif (value && isWIF(value)) {\r\n\t\t\t\t\treturn null\r\n\t\t\t\t}\r\n\t\t\t\tthrow new Error ('invalidWIF')\r\n\t\t\t})\r\n\t\t)\r\n\t\t.subscribe(\r\n\t\t\t_ => obs.next(null),\r\n\t\t\terror => {\r\n\t\t\t\tobs.next({ [error.message]: true })\r\n\t\t\t\tobs.complete()\r\n\t\t\t}\r\n\t\t)\r\n\t)\r\n}\r\n\r\nexport function WIFValidator (wifCtrl: FormControl): ValidationErrors | null {\r\n\treturn isWIF(wifCtrl.value) ? null : { invalidWIF: true }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/login/login.validator.ts","import { NgModule } from '@angular/core'\r\nimport { TranslateModule } from '@ngx-translate/core'\r\nimport { IonicModule } from 'ionic-angular'\r\nimport { LoginForm } from './login-form'\r\n\r\nconst COMPONENTS = [LoginForm]\r\n\r\n// TODO(Amagi): Using IonicModule may be become a huge cost right there, Optimize later\r\n@NgModule({\r\n\tdeclarations: COMPONENTS,\r\n\timports: [\r\n\t\tIonicModule,\r\n\t\tTranslateModule.forChild()\r\n\t],\r\n\texports: COMPONENTS\r\n})\r\nexport class LoginFormModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/login/login-form.module.ts","import {\r\n\tComponent,\r\n\tOnInit\r\n} from '@angular/core'\r\nimport { Store } from '@ngrx/store'\r\nimport {\r\n\tIonicPage,\r\n\tNavController,\r\n\tNavParams\r\n} from 'ionic-angular'\r\nimport { LoadingProvider, NotificationProvider } from '../../providers'\r\nimport { nep5Wallet } from '../../shared/userWallet'\r\nimport { AuthActions } from '../../store/actions'\r\nimport { RootState } from '../../store/reducers'\r\nimport { AuthSelectors } from '../../store/selectors'\r\n\r\n\r\n@IonicPage({\r\n\tname: 'Login',\r\n\tsegment: 'login'\r\n})\r\n@Component({\r\n\tselector: 'page-login',\r\n\ttemplateUrl: 'login.html',\r\n})\r\nexport class LoginPage implements OnInit {\r\n\ttranslationPrefix = 'LOGIN.'\r\n\r\n\tconstructor (\r\n\t\tpublic navCtrl: NavController,\r\n\t\tpublic navParams: NavParams,\r\n\t\tprivate np: NotificationProvider,\r\n\t\tprivate lp: LoadingProvider,\r\n\t\tprivate store: Store<RootState>\r\n\t) { }\r\n\r\n\tngOnInit () {\r\n\t\tthis.store.select(AuthSelectors.getError).subscribe(error => error && this.np.emit({ message: error }))\r\n\t\tthis.store.select(AuthSelectors.getLoading).subscribe(bool => bool && this.lp.emit(bool))\r\n\t}\r\n\r\n\tloginNEP5 = file => this.store.dispatch(new AuthActions.Login(file))\r\n\r\n\tloginWIF (wifValue) {\r\n\t\treturn wifValue === 'test'\r\n\t\t\t? this.loginNEP5(nep5Wallet)\r\n\t\t\t: this.store.dispatch(new AuthActions.LoginWif(wifValue))\r\n\t}\r\n\r\n\tloginOldWallet = ({ oldWallet, passphrase }) =>\r\n\t\tthis.store.dispatch(new AuthActions.LoginOldWallet({ oldWallet, passphrase }))\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/login/login.ts","import { Contact } from '../shared/models'\r\n\r\nconst CONTACT_A: Contact = {\r\n\tname: 'John',\r\n\taddress: 'AHZDq78w1ERcDYVBWjU5owWcbFZKLvhg7X',\r\n\tdescription: 'Work friend'\r\n}\r\n\r\nconst CONTACT_B: Contact = {\r\n\tname: 'Joe',\r\n\taddress: 'AXoibWhJXYRxckemGa8ZydGpQdBP7GX7st',\r\n\tdescription: 'Special friend'\r\n}\r\n\r\nconst CONTACT_C: Contact = {\r\n\tname: 'Tom',\r\n\taddress: 'AJnNUn6HynVcco1p8LER72s4zXtNFYDnys'\r\n}\r\n\r\nconst CONTACT_D: Contact = {\r\n  name: '张三',\r\n  address: 'ANsvyS9q1n6SBDVSdB6uFwVeqT512YSAoW',\r\n\tdescription: '我的中国朋友'\r\n}\r\n\r\nexport const TEST_CONTACTS: Contact[] = [\r\n  CONTACT_A,\r\n  CONTACT_B,\r\n  CONTACT_C,\r\n  CONTACT_D\r\n]\r\n\r\nexport const nep5Wallet = {\r\n  'name': 'userWallet',\r\n  'version': '1.0',\r\n  'scrypt': {\r\n    'cost': 16384,\r\n    'blockSize': 8,\r\n    'parallel': 8,\r\n    'size': 64\r\n  },\r\n  'accounts': [\r\n    {\r\n      'address': 'AWqp5iP81A8boBcheWFQgLqnks4wkPkmRg',\r\n      'label': '1',\r\n      'isDefault': false,\r\n      'lock': false,\r\n      'key': '6PYLnNeafXYEt3jnv9Z7oLa3obcTM3BLqt13MBBzk25yo613WQ3pnBD93B',\r\n      'contract': {},\r\n      'extra': null\r\n    },\r\n    {\r\n      'address': 'AXoibWhJXYRxckemGa8ZydGpQdBP7GX7st',\r\n      'label': '1234',\r\n      'isDefault': true,\r\n      'lock': false,\r\n      'key': '6PYU48pchs8osmxzHoKFX4Ka16SyutmvzkdH1ptjhJymPxJ39nx6qfBs8x',\r\n      'contract': {},\r\n      'extra': null\r\n    }\r\n  ],\r\n  'extra': {\r\n    contacts: TEST_CONTACTS\r\n  }\r\n}\r\n\r\nexport const oldWallet = {\r\n  'address': 'AHZDq78w1ERcDYVBWjU5owWcbFZKLvhg7X',\r\n  'publicKey': '0483cdbc3f4d2213043c19d6bd041c08fbe0a3bacd43ef695500a1b33c609a9e8a180eee2ada65ddb65154863c57bac9ab1b89a61593235991d5fb6f627c0cadbd',\r\n  'publicKeyCompressed': '0383cdbc3f4d2213043c19d6bd041c08fbe0a3bacd43ef695500a1b33c609a9e8a',\r\n  'privateKeyEncrypted': 'U2FsdGVkX1/TSwg9yTR+kDT8QKgC5yAQpc64KI0XyiCz97ozFLJK8YNJxvahqHr4lmBLYxZkM4E9tpIVHsblJjcjio19hb8L+uiYM4WXUAFQtpXIDDvwIP+TutTKQHOH'\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/userWallet.ts"],"sourceRoot":""}