{"version":3,"sources":["../../src/containers/profile/contacts/edit-contact/edit-contact.module.ts","../../src/containers/profile/contacts/edit-contact/edit-contact.ts"],"names":[],"mappings":"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","file":"22.js","sourcesContent":["import { NgModule } from '@angular/core'\r\nimport { TranslateModule } from '@ngx-translate/core'\r\nimport { IonicPageModule } from 'ionic-angular'\r\n\r\nimport { EditContact } from './edit-contact'\r\n\r\n@NgModule({\r\n\timports: [\r\n\t\tIonicPageModule.forChild(EditContact),\r\n\t\tTranslateModule.forChild()\r\n\t],\r\n\tdeclarations: [EditContact],\r\n})\r\nexport class EditContactModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/profile/contacts/edit-contact/edit-contact.module.ts","import {\r\n\tComponent,\r\n\tOnDestroy,\r\n\tOnInit\r\n} from '@angular/core'\r\nimport { Store } from '@ngrx/store'\r\nimport { TranslateService } from '@ngx-translate/core'\r\nimport {\r\n\tIonicPage,\r\n\tNavParams\r\n} from 'ionic-angular'\r\nimport { NotificationProvider } from '../../../../providers'\r\nimport { isAddress } from '../../../../shared/utils'\r\nimport { RootState } from '../../../../store/reducers'\r\nimport { ContactsActions } from '../../../../store/actions'\r\nimport { ContactsSelectors } from '../../../../store/selectors'\r\n\r\n\r\n@IonicPage({\r\n\tname: 'EditContact'\r\n})\r\n@Component({\r\n\tselector: 'edit-contact',\r\n\ttemplateUrl: 'edit-contact.html'\r\n})\r\nexport class EditContact implements OnInit, OnDestroy {\r\n\ttranslationPrefix = 'PROFILE.CONTACTS.EDIT.'\r\n\tcounter = 0\r\n\tcontactsEntities\r\n\tcontact\r\n\teditMode = false\r\n\tnameHasChanged: boolean\r\n\tdescriptionHasChanged: boolean\r\n\taddressHasChanged: boolean\r\n\r\n\tget isAddition () { return this.navParams.get('addition') }\r\n\r\n\tget avatar () { return this.contact && this.contact.avatar }\r\n\r\n\tget address () {\r\n\t\treturn this.addressHasChanged ? this._address : this.contact && this.contact.address\r\n\t}\r\n\tset address (val) { this._address = val }\r\n\tprivate _address: string\r\n\r\n\tget description () {\r\n\t\treturn this.descriptionHasChanged ? this._description : this.contact && this.contact.description\r\n\t}\r\n\tset description (val) { this._description = val }\r\n\tprivate _description: string\r\n\r\n\tget name () {\r\n\t\treturn this.nameHasChanged ? this._name : this.contact && this.contact.name\r\n\t}\r\n\tset name (val) { this._name = val }\r\n\tprivate _name: string\r\n\r\n\tconstructor (\r\n\t\tprivate store: Store<RootState>,\r\n\t\tprivate navParams: NavParams,\r\n\t\tprivate np: NotificationProvider,\r\n\t\tprivate ts: TranslateService,\r\n\t) {}\r\n\r\n\tngOnInit () {\r\n\t\tthis.store.select(ContactsSelectors.getSelectedContact).subscribe(selectedContact => this.contact = selectedContact || {})\r\n\t\tthis.store.select(ContactsSelectors.getEntities).subscribe(entities => this.contactsEntities = entities || {})\r\n\t}\r\n\r\n\tngOnDestroy () {\r\n\t\tthis.store.dispatch(new ContactsActions.CleanSelect())\r\n\t}\r\n\r\n\thandleUpdateContact () {\r\n\t\tconst { address, name, description, avatar } = this\r\n\t\tif (!isAddress(address)) return this.notifyMsg('address_error')\r\n\t\tif (!name) return this.notifyMsg('name_error')\r\n\t\tif (name.trim().length > 8) return this.notifyMsg('name_length_error')\r\n\t\tconst changes = { address, name: name.trim(), description, avatar }\r\n\t\tconst isChanged = this.isAddition && address in this.contactsEntities\r\n\t\tif (isChanged && this.counter === 0) {\r\n\t\t\tthis.counter++\r\n\t\t\tthis.notifyMsg('update_confirm')\r\n\t\t\treturn setTimeout(() => this.counter = 0, 500)\r\n\t\t}\r\n\t\tthis.store.dispatch(new ContactsActions.Update({ id: address, changes }))\r\n\t\tthis.notifyMsg('update_success')\r\n\t}\r\n\r\n\tnotifyMsg (suffix) {\r\n\t\treturn this.ts.get(this.translationPrefix + suffix).take(1).subscribe(t => this.np.emit(t))\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/profile/contacts/edit-contact/edit-contact.ts"],"sourceRoot":""}