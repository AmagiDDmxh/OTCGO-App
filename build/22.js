webpackJsonp([22],{1014:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e.d(n,"EditContactModule",function(){return c});var i=e(0),o=e(100),r=e(55),a=e(1637),s=this&&this.__decorate||function(t,n,e,i){var o,r=arguments.length,a=r<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(n,e,a):o(n,e))||a);return r>3&&a&&Object.defineProperty(n,e,a),a},c=function(){function t(){}return t=s([Object(i.I)({imports:[r.f.forChild(a.a),o.b.forChild()],declarations:[a.a]})],t)}()},1637:function(t,n,e){"use strict";e.d(n,"a",function(){return l});var i=e(0),o=e(15),r=e(100),a=e(55),s=e(42),c=e(102),d=e(141),u=e(101),f=this&&this.__decorate||function(t,n,e,i){var o,r=arguments.length,a=r<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(n,e,a):o(n,e))||a);return r>3&&a&&Object.defineProperty(n,e,a),a},h=this&&this.__metadata||function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},l=function(){function t(t,n,e,i){this.store=t,this.navParams=n,this.np=e,this.ts=i,this.translationPrefix="PROFILE.CONTACTS.EDIT.",this.counter=0,this.editMode=!1}return Object.defineProperty(t.prototype,"isAddition",{get:function(){return this.navParams.get("addition")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"avatar",{get:function(){return this.contact&&this.contact.avatar},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"address",{get:function(){return this.addressHasChanged?this._address:this.contact&&this.contact.address},set:function(t){this._address=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.descriptionHasChanged?this._description:this.contact&&this.contact.description},set:function(t){this._description=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.nameHasChanged?this._name:this.contact&&this.contact.name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.store.select(u.d.getSelectedContact).subscribe(function(n){return t.contact=n||{}}),this.store.select(u.d.getEntities).subscribe(function(n){return t.contactsEntities=n||{}})},t.prototype.ngOnDestroy=function(){this.store.dispatch(new d.d.CleanSelect)},t.prototype.handleUpdateContact=function(){var t=this,n=this.address,e=this.name,i=this.description,o=this.avatar;if(!Object(c.e)(n))return this.notifyMsg("address_error");if(!e)return this.notifyMsg("name_error");if(e.trim().length>8)return this.notifyMsg("name_length_error");var r={address:n,name:e.trim(),description:i,avatar:o};if(this.isAddition&&n in this.contactsEntities&&0===this.counter)return this.counter++,this.notifyMsg("update_confirm"),setTimeout(function(){return t.counter=0},500);this.store.dispatch(new d.d.Update({id:n,changes:r})),this.notifyMsg("update_success")},t.prototype.notifyMsg=function(t){var n=this;return this.ts.get(this.translationPrefix+t).take(1).subscribe(function(t){return n.np.emit(t)})},t=f([Object(i.m)({selector:"edit-contact",template:'<ion-header class="otcgo-header">\n\n\t<ion-navbar></ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content class="edit-contact__content">\n\n\t<div class="edit-contact__background">\n\n\t\t<div class="edit-contact__title">\n\n\t\t\t<div class="edit-contact__avatar">\n\n\t\t\t\t<img *ngIf="avatar" src="{{ avatar }}">\n\n\t\t\t</div>\n\n\n\n\t\t\t<div class="edit-contact__name" *ngIf="name && !editMode" (click)="editMode = !editMode">{{ name }}</div>\n\n\t\t\t<ion-input\n\n\t\t\t\t*ngIf="!name || editMode"\n\n\t\t\t\t[(ngModel)]="name"\n\n\t\t\t\t(ionBlur)="name && (editMode = !editMode)"\n\n\t\t\t\t(ionChange)="nameHasChanged = true; editMode = true"\n\n\t\t\t\tclass="edit-contact__change-name"\n\n\t\t\t\tplaceholder="{{ translationPrefix + \'name\' | translate }}"></ion-input>\n\n\t\t</div>\n\n\t</div>\n\n\n\n\t<div class="main-content">\n\n\t\t<ion-input\n\n\t\t\t[(ngModel)]="address"\n\n\t\t\t(ionChange)="addressHasChanged = true"\n\n\t\t\tclass="edit-contact__input"\n\n\t\t\tplaceholder="{{ translationPrefix + \'address\' | translate }}"></ion-input>\n\n\n\n\t\t<ion-input\n\n\t\t\t[(ngModel)]="description"\n\n\t\t\t(ionChange)="descriptionHasChanged = true"\n\n\t\t\tclass="edit-contact__input"\n\n\t\t\tplaceholder="{{ translationPrefix + \'description\' | translate }}"></ion-input>\n\n\n\n\t\t<button\n\n\t\t\tion-button round full class="otcgo-button--colour"\n\n\t\t\t(click)="handleUpdateContact()">{{ translationPrefix + \'save\' | translate }}</button>\n\n\t</div>\n\n</ion-content>\n\n'}),h("design:paramtypes",[o.h,a.j,s.f,r.c])],t)}()}});