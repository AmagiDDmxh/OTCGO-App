{"version":3,"sources":["../../src/containers/profile/claims/claims.module.ts","../../src/containers/profile/claims/claims.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAwC;AACO;AACV;AACgB;AASrD;IAAA;IAA+B,CAAC;IAAnB,gBAAgB;QAP5B,uEAAQ,CAAC;YACT,YAAY,EAAE,CAAC,2DAAU,CAAC;YAC1B,OAAO,EAAE;gBACR,4EAAe,CAAC,QAAQ,EAAE;gBAC1B,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC;aACpC;SACD,CAAC;OACW,gBAAgB,CAAG;IAAD,uBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZY;AACN;AAG+B;AACd;AACF;AAEI;AACI;AACf;AACnC,wEAAO,EAAE,8FAAoB,CAAW;AAQhD;IAIC,oBACS,cAA8B,EAC9B,eAAgC,EAC/B,SAA0B,EAC1B,KAAuB,EACvB,WAA8B;QAJ/B,mBAAc,GAAd,cAAc,CAAgB;QAC9B,oBAAe,GAAf,eAAe,CAAiB;QAC/B,cAAS,GAAT,SAAS,CAAiB;QAC1B,UAAK,GAAL,KAAK,CAAkB;QACvB,gBAAW,GAAX,WAAW,CAAmB;QARxC,YAAO,GAAG,IAAI,CAAC,eAAe,CAAC,cAAc;IAS1C,CAAC;IAEJ,mCAAc,GAAd;QAAA,iBAQC;QAPA,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,qEAAa,CAAC,IAAI,EAAE,CAAC;QAC7C,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,yEAAe,CAAC,WAAW,CAAC,CAAC,SAAS,CACvD,UAAC,MAAc;YACd,EAAE,CAAC,CAAC,MAAM,CAAC;gBACV,KAAI,CAAC,YAAY,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;QACxF,CAAC,CACD;IACF,CAAC;IAED,4BAAO,GAAP;QAAA,iBA+BC;QA9BC,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;QACvC,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAClC,KAAK,EAAE,MAAM;YACb,OAAO,EAAE,SAAS;YAClB,MAAM,EAAE,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC;YACrE,OAAO,EAAE;gBACR,EAAE,IAAI,EAAE,IAAI,EAAE;gBACd;oBACC,IAAI,EAAE,IAAI;oBACV,OAAO,EAAE,UAAC,EAAc;4BAAZ,0BAAU;wBACrB,EAAE,CAAC,CAAC,UAAU,KAAK,EAAE,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;4BAAC,MAAM,CAAC,KAAK;wBAC5D,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;;;;;;wCAEf,EAAE,GAAG,oBAAoB,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;wCAC5E,qBAAM,OAAO,CAAC,OAAO,EAAE;;wCAAvB,SAAuB;wCACvB,qBAAM,MAAM,CAAC,OAAO,EAAE;;wCAAtB,SAAsB;wCACP,qBAAM,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,CAAC;;wCAA/C,MAAM,GAAG,SAAsC;wCACrD,MAAM,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;;;;wCAElC,qBAAM,OAAO,CAAC,OAAO,EAAE;;wCAAvB,SAAuB;wCACvB,qBAAM,MAAM,CAAC,OAAO,EAAE;;wCAAtB,SAAsB;wCACtB,IAAI,CAAC,UAAU,CAAC,GAAC,CAAC,OAAO,IAAI,GAAC,CAAC;wCAC/B,OAAO,CAAC,GAAG,CAAC,GAAC,CAAC;;;;;6BAEf,CAAC;oBACH,CAAC;iBACD;aACD;SACD,CAAC;QACF,MAAM,CAAC,OAAO,EAAE;IAClB,CAAC;IAED,+BAAU,GAAV,UAAY,GAAG;QACd,IAAM,OAAO,GAAG,GAAG,CAAC,OAAO,IAAI,GAAG;QAClC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,OAAO,WAAE,CAAC,CAAC,OAAO,EAAE;IAC7C,CAAC;IA1DW,UAAU;QAJtB,wEAAS,CAAC;YACV,QAAQ,EAAE,aAAa;WACG;SAC1B,CAAC;gFAMsC;YACb,sEAAe;YACpB,2DAAe;YACnB,wEAAK;YACC,OAAiB;OAT5B,UAAU,CA2DtB;IAAD,CAAC;AAAA;SA3DY,UAAU,e","file":"23.js","sourcesContent":["import { NgModule } from '@angular/core'\r\nimport { IonicPageModule } from 'ionic-angular'\r\nimport { ClaimsPage } from './claims'\r\nimport { TranslateModule } from '@ngx-translate/core'\r\n\r\n@NgModule({\r\n\tdeclarations: [ClaimsPage],\r\n\timports: [\r\n\t\tTranslateModule.forChild(),\r\n\t\tIonicPageModule.forChild(ClaimsPage),\r\n\t]\r\n})\r\nexport class ClaimsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/profile/claims/claims.module.ts","import { Component } from '@angular/core'\r\nimport { Store } from '@ngrx/store'\r\nimport { Claims } from '@shared/models'\r\n\r\nimport { AlertController, IonicPage, LoadingController } from 'ionic-angular'\r\nimport { AccountProvider } from '../../../providers'\r\nimport { ClaimsProvider } from './claims.provider'\r\nimport { RootState } from '../../../store/reducers'\r\nimport { ClaimsActions } from '../../../store/actions'\r\nimport { ClaimsSelectors } from '../../../store/selectors'\r\nimport { wallet } from '../../../libs/neon'\r\nconst { decrypt, getPrivateKeyFromWIF } = wallet\r\n\r\n\r\n@IonicPage({\r\n\tname: 'Claims',\r\n\tsegment: 'claims'\r\n})\r\n@Component({\r\n\tselector: 'page-claims',\r\n\ttemplateUrl: 'claims.html'\r\n})\r\nexport class ClaimsPage {\r\n\taccount = this.accountProvider.defaultAccount\r\n\tavailableGas\r\n\r\n\tconstructor (\r\n\t\tprivate claimsProvider: ClaimsProvider,\r\n\t\tprivate accountProvider: AccountProvider,\r\n\t  private alertCtrl: AlertController,\r\n\t  private store: Store<RootState>,\r\n\t  private loadingCtrl: LoadingController\r\n\t) {}\r\n\r\n\tionViewDidLoad () {\r\n\t\tthis.store.dispatch(new ClaimsActions.Load())\r\n\t\tthis.store.select(ClaimsSelectors.getEntities).subscribe(\r\n\t\t\t(claims: Claims) => {\r\n\t\t\t\tif (claims)\r\n\t\t\t\t\tthis.availableGas = (Number(claims.available) + Number(claims.unavailable)).toFixed(8)\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\tdoClaim () {\r\n\t\t\tlet loading = this.loadingCtrl.create()\r\n\t\t\tlet prompt = this.alertCtrl.create({\r\n\t\t\t\ttitle: '输入密码',\r\n\t\t\t\tmessage: '输入您的密码！',\r\n\t\t\t\tinputs: [{ name: 'passphrase', placeholder: '密码', type: 'password' }],\r\n\t\t\t\tbuttons: [\r\n\t\t\t\t\t{ text: '取消' },\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: '确认',\r\n\t\t\t\t\t\thandler: ({ passphrase }) => {\r\n\t\t\t\t\t\t\tif (passphrase === '' || passphrase.length < 4) return false\r\n\t\t\t\t\t\t\tloading.present().then(async () => {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tconst pr = getPrivateKeyFromWIF(decrypt(this.account.encrypted, passphrase))\r\n\t\t\t\t\t\t\t\t\tawait loading.dismiss()\r\n\t\t\t\t\t\t\t\t\tawait prompt.dismiss()\r\n\t\t\t\t\t\t\t\t\tconst result = await this.claimsProvider.doClaims(pr)\r\n\t\t\t\t\t\t\t\t\tresult && this.showPrompt('提取成功！')\r\n\t\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t\tawait loading.dismiss()\r\n\t\t\t\t\t\t\t\t\tawait prompt.dismiss()\r\n\t\t\t\t\t\t\t\t\tthis.showPrompt(e.message || e)\r\n\t\t\t\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t})\r\n\t\t\tprompt.present()\r\n\t}\r\n\r\n\tshowPrompt (msg) {\r\n\t\tconst message = msg.message || msg\r\n\t\tthis.alertCtrl.create({ message }).present()\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/profile/claims/claims.ts"],"sourceRoot":""}